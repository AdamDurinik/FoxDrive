/* --- Reset & Theme ------------------------------------------------------- */
*{box-sizing:border-box}
html,body{margin:0;height:100%}
:root{
  --bg:#0b0f14; --panel:#0f1624; --muted:#8aa0b6; --text:#e7eef7;
  --accent:#5cc8ff; --accent-2:#7c5cff; --danger:#ff6b6b; --border:#223045;
  --ring:#7dbdff;
  --shadow:0 10px 30px #00000040, inset 0 1px 0 #ffffff10;
  --radius:14px;
  --gap:12px;
}
html,body{overflow-x:hidden}

body{
  font:clamp(14px, 1.6vw, 16px)/1.5 system-ui, Segoe UI, Roboto, Arial, sans-serif;
  color:var(--text);
  background:
    radial-gradient(1200px 500px at 20% -10%, #19304855, transparent 60%),
    radial-gradient(1200px 500px at 80% -10%, #28194855, transparent 60%),
    var(--bg);
}

/* --- Header -------------------------------------------------------------- */
header{
  position:sticky; top:0; z-index:10;
  backdrop-filter:blur(8px);
  background:linear-gradient(180deg, rgba(11,15,20,.92), rgba(11,15,20,.80));
  border-bottom:1px solid var(--border);
  padding:10px 16px; display:flex; align-items:center; gap:12px; justify-content:space-between;
}
header .brand{display:flex; align-items:center; gap:10px; font-weight:700; letter-spacing:.2px}
header .brand img{height:22px; width:auto; display:block}
.header-actions{margin-left:auto; display:flex; align-items:center; gap:8px}
@media (max-width:560px){
  header{padding:8px 12px; gap:8px}
  header .brand{gap:8px; font-size:15px}
  header .brand img{height:18px}
}

/* --- Buttons ------------------------------------------------------------- */
.btn{
  border:1px solid var(--border); background:#0e1623; color:var(--text);
  padding:10px 14px; border-radius:10px; cursor:pointer; user-select:none;
  transition:transform .08s ease, border-color .2s ease, background .2s ease, box-shadow .2s ease;
  text-decoration:none; display:inline-flex; align-items:center; justify-content:center; gap:8px;
}
.btn:hover{transform:translateY(-1px); border-color:#33507a}
.btn:active{transform:translateY(0)}
.btn:focus-visible{outline:0; box-shadow:0 0 0 2px #001828, 0 0 0 4px var(--ring)}
.btn.primary{background:linear-gradient(180deg,#16263c,#0f1b2e); border-color:#2d4d7a}
.btn.danger{border-color:#7a3333; background:#2a1416}
.btn.small{padding:8px 10px; font-size:13px}
@media (max-width:560px){
  .btn{padding:8px 12px; font-size:15px}
  .btn.small{padding:6px 10px; font-size:13px}
}

/* Compact icon buttons (emoji-only) */
.btn.icon{
  padding:0; width:32px; height:32px; border-radius:8px;
  display:inline-grid; place-items:center; font-size:17px; line-height:1;
}
@media (max-width:560px){
  .btn.icon{ width:30px; height:30px; font-size:16px; border-radius:8px; }
}

/* --- Page container ------------------------------------------------------ */
main{max-width:1100px; margin:16px auto; padding:0 16px 96px}
@media (max-width:560px){ main{margin:12px auto; padding:0 12px 96px} }
footer{position:static}

/* --- Cards --------------------------------------------------------------- */
.card{
  background:linear-gradient(180deg,#101a2b,#0c1320);
  border:1px solid var(--border); border-radius:var(--radius); padding:12px;
  box-shadow:var(--shadow);
  transition:transform .12s ease, border-color .2s ease, background .2s ease;
  position:relative; animation:fadeIn .2s ease; will-change:transform;
}
.card:hover{transform:translateY(-2px); border-color:#3a5e92; background:#111b2d}
.title{font-weight:600; line-height:1.25}
@media (max-width:560px){ .card{padding:10px} .title{font-size:18px} }

/* --- Forms --------------------------------------------------------------- */
form{width:100%}
label{display:block; font-size:12px; color:var(--muted); margin:0 0 6px}
input,select,textarea{
  width:100%; background:#0b1422; color:var(--text);
  border:1px solid var(--border); border-radius:10px; padding:10px 12px;
  transition:border-color .2s ease, box-shadow .2s ease, background .2s ease;
}
input::placeholder{color:#9ab0c5aa}
input:focus-visible,select:focus-visible,textarea:focus-visible{
  outline:0; border-color:#3a5e92; box-shadow:0 0 0 2px #001828, 0 0 0 4px var(--ring)
}
@media (max-width:560px){
  label{font-size:11px}
  input,select,textarea{padding:9px 10px}
}

/* Add form (desktop → phone → xs) */
#addForm{
  display:grid; grid-template-columns:2fr 1fr 1fr 1fr auto; gap:8px; align-items:end; margin:10px 0;
}
#addForm .btn{height:40px}
@media (max-width:900px){
  #addForm{grid-template-columns:1.5fr 1fr 1fr auto}
  #addForm > :nth-child(4){grid-column:1 / -1} /* Shop drops */
}
@media (max-width:640px){
  #addForm{grid-template-columns:1fr 1fr}
  #addForm .btn{grid-column:1 / -1}            /* Full-width Add */
}
@media (max-width:400px){
  #addForm{grid-template-columns:1fr}          /* Stack all */
}

/* --- Table (Desktop) ----------------------------------------------------- */
.table{width:100%; border-collapse:separate; border-spacing:0 6px}
.table thead th{ text-align:left; padding:6px 8px; font-weight:600; color:var(--muted) }
.table tbody tr{ background:#0c1320; border:1px solid var(--border) }
.table td{ padding:8px 10px; vertical-align:middle }
.table .cell-actions{white-space:nowrap; text-align:right}
.table .cell-center{text-align:center}
.table input[type="text"],
.table input[type="date"],
.table input:not([type]),
.table select{ background:#0a1320; padding:8px 10px; border-radius:8px; border:1px solid #1b2a42 }
.table input[type="checkbox"]{ width:18px; height:18px; accent-color:var(--accent) }

/* --- Table → Cards (Mobile) --------------------------------------------- */
@media (max-width:760px){
  .table thead{display:none}
  .table, .table tbody, .table tr, .table td{display:block; width:100%}
  .table tbody{display:grid; gap:10px}
  .table tr{
    border:1px solid var(--border); border-radius:12px; overflow:hidden;
    background:linear-gradient(180deg,#0f1726,#0b1422);
  }
  .table td{padding:10px 12px; border:0}
  .table td[data-th]::before{
    content:attr(data-th); display:block; font-size:12px; color:var(--muted); margin-bottom:6px;
  }
  .table .cell-actions{display:flex; justify-content:flex-end; gap:8px; padding-top:6px}
}
@media (min-width:761px){
  .table thead th{position:sticky; top:0; background:#0b101a; padding-top:10px; z-index:1}
}

/* --- Left rail (future) -------------------------------------------------- */
.layout{display:grid; grid-template-columns:240px 1fr; gap:16px}
@media (max-width:980px){ .layout{grid-template-columns:1fr} }
aside#left{
  border:1px solid var(--border); border-radius:var(--radius); padding:12px;
  background:linear-gradient(180deg,#101a2b,#0c1320);
  position:sticky; top:66px; max-height:calc(100vh - 86px); overflow:auto;
}
aside#left h3{margin:4px 0 10px; font-size:13px; color:var(--muted); letter-spacing:.2px}
.favs{display:flex; flex-direction:column; gap:6px}
.fav{display:flex; gap:8px; align-items:center; padding:6px 8px; border-radius:8px; cursor:pointer}
.fav:hover{background:#0f1c2f}

/* --- Modals / Context menu ---------------------------------------------- */
.modal{position:fixed; inset:0; background:rgba(0,0,0,.55); display:none; align-items:center; justify-content:center; padding:24px; z-index:2000}
.modal.show{display:flex !important}
.modal .box{width:min(460px,95vw); background:#0b1422; border:1px solid var(--border); border-radius:var(--radius); box-shadow:0 20px 60px #000000aa; overflow:hidden}
.ctx{position:absolute; z-index:1000; display:none; min-width:170px; background:#0f1624; border:1px solid var(--border); border-radius:10px; box-shadow:0 10px 30px #00000066}
.ctx.show{display:block}
.ctx button,.ctx a{width:100%; text-align:left; padding:8px 12px; border:none; background:transparent; color:var(--text); cursor:pointer; display:block; text-decoration:none}
.ctx button:hover,.ctx a:hover{background:#0f1c2f}

/* --- Animations & preferences ------------------------------------------- */
@keyframes fadeIn{from{opacity:.0; transform:translateY(6px)} to{opacity:1; transform:none}}
@media (prefers-reduced-motion:reduce){
  *{animation:none !important; transition:none !important}
  header{backdrop-filter:none}
}

/* --- Shopping UI helpers ------------------------------------------------- */
.mt-16{margin-top:16px}
.pad-8{padding:8px}
.small{font-size:13px}
.muted{color:var(--muted)}
.badge{background:linear-gradient(90deg,var(--accent),var(--accent-2)); color:#001018; padding:2px 8px; border-radius:999px; font-weight:700; font-size:12px}

/* Action bar */
.bar{display:flex; gap:8px; align-items:center; justify-content:space-between; margin:8px 0 6px}
.bar-left{display:flex; gap:10px; align-items:center}
.bar-right{display:flex; gap:8px; align-items:center}

/* List rows */
.list{list-style:none; padding-left:0; margin:10px 0; display:flex; flex-direction:column; gap:10px}
.item{
  display:flex; align-items:center; gap:8px;
  background:linear-gradient(180deg,#0f1726,#0b1422);
  border:1px solid var(--border); border-radius:12px; padding:8px 10px;
}
.item .content{
  display:flex; align-items:center; gap:8px; flex:1 1 auto; min-width:0;
  font-size:15px; overflow-wrap:anywhere; line-height:1.3;
}
.item .sep{opacity:.35}
.item .actions{display:flex; gap:6px; flex-wrap:wrap; flex-shrink:0}

/* Editable line */
.item .inline{
  appearance:none; background:transparent; border:1px solid transparent;
  color:var(--text); padding:2px 4px; border-radius:8px; min-width:40px; line-height:1.25;
}
.item .inline:focus-visible{
  outline:0; background:#0a1320; border-color:#1b2a42;
  box-shadow:0 0 0 2px #001828, 0 0 0 4px var(--ring);
}

/* Strike-through only the main line when done (keep date normal) */
.item .line{ transition:opacity .15s ease, color .15s ease, text-decoration-color .15s ease; }
.item.done .line{
  text-decoration:line-through;
  text-decoration-thickness:2.5px;
  text-decoration-color:rgba(231,238,247,0.85);
  text-decoration-skip-ink:auto;
  opacity:.9;
  color:var(--muted);
}

/* Desktop/tablet: compact single-line with ellipsis */
@media (min-width:561px){
  .item .inline{white-space:nowrap; overflow:hidden; text-overflow:ellipsis}
}

/* Phones: stack content, hide dash separators */
@media (max-width:560px){
  .item{align-items:flex-start}
  .item .content{flex-direction:column; align-items:flex-start; gap:4px}
  .item .sep{display:none}
  .item .inline{white-space:normal; word-break:break-word}
  header{backdrop-filter:blur(6px)}
}

/* Extra small phones: big thumb-friendly actions grid */
@media (max-width:400px){
  .item .actions{display:grid; grid-template-columns:1fr 1fr; gap:8px}
  .item .actions .btn{width:100%}
}


/* Modal base */
.modal-backdrop{ position:fixed; inset:0; background:rgba(0,0,0,.55); }
.modal-panel{ position:fixed; left:50%; top:50%; transform:translate(-50%,-50%);
  width:min(480px,92vw); background:#0b1422; border:1px solid var(--border);
  border-radius:var(--radius); box-shadow:0 30px 80px #0009; padding:14px 14px 12px; }
.modal-header{ margin-bottom:8px; }
.modal-body{ margin:8px 0 12px; }
.modal-footer{ display:flex; justify-content:flex-end; gap:8px; }

/* Modal inputs */
.modal input[type="text"]{ width:100%; padding:10px 12px; border:1px solid var(--border);
  border-radius:10px; background:#0b1422; color:var(--text); }

/* Tiny color swatches for group styles */
.palette{ display:flex; gap:8px; flex-wrap:wrap; }
.swatch{ width:28px; height:28px; border-radius:8px; border:1px solid var(--border); cursor:pointer; }
.swatch[data-style="default"]{ background:linear-gradient(180deg,#101a2b,#0c1320); }
.swatch[data-style="blue"]{ background:linear-gradient(180deg,#0f1c32,#0b1422); }
.swatch[data-style="green"]{ background:linear-gradient(180deg,#10321c,#0b1422); }
.swatch[data-style="orange"]{ background:linear-gradient(180deg,#32210f,#0b1422); }
.swatch[data-style="pink"]{ background:linear-gradient(180deg,#2b0f32,#0b1422); }

/* Visuals for group style (client-only via data-style) */
.group[data-style="blue"]{ border-color:#2b4f86; background:linear-gradient(180deg,#0f1c32,#0b1422); }
.group[data-style="green"]{ border-color:#2b8648; background:linear-gradient(180deg,#10321c,#0b1422); }
.group[data-style="orange"]{ border-color:#86542b; background:linear-gradient(180deg,#32210f,#0b1422); }
.group[data-style="pink"]{ border-color:#712b86; background:linear-gradient(180deg,#2b0f32,#0b1422); }

/* GROUP CARD UPGRADE */
.group{
  position:relative;
  border:1px solid var(--border);
  border-radius:14px;
  background:linear-gradient(180deg,#0f1726,#0b1422);
  box-shadow:0 8px 22px #0006, inset 0 1px 0 #ffffff12;
  padding:10px;                /* keeps current spacing */
  overflow:hidden;
  transition:border-color .2s ease, box-shadow .2s ease, transform .08s ease;
}
.group:hover{
  border-color:#33507a;
  box-shadow:0 12px 28px #0008, inset 0 1px 0 #ffffff15;
  transform:translateY(-1px);
}

/* Distinct header bar (no markup change) */
.group-header{
  margin:-10px -10px 10px;     /* stretch to edges of card */
  padding:10px 12px;
  display:flex; align-items:center; justify-content:space-between;
  background:linear-gradient(180deg,#16263c,#0f1c31);
  border-bottom:1px solid #1b2a42;
  border-top-left-radius:14px;
  border-top-right-radius:14px;
}
.group-header > div:first-child{
  font-weight:600;
  letter-spacing:.2px;
}

/* Subtle body panel so tasks feel separated from header */
.group .tasks{
  padding:6px;
  border-radius:10px;
  background:linear-gradient(180deg,#0f1726,#0b1422);
  border:1px solid #1b2a42;
  box-shadow:inset 0 0 0 1px #00000040;
}

/* Task rows: a hair more card-like */
.task{
  background:rgba(0,0,0,.12);
  border:1px solid #22324a;
  border-radius:8px;
  padding:6px 8px;
  transition:background .15s ease, border-color .15s ease;
}
.task:hover{ background:rgba(0,0,0,.18); border-color:#2b4770; }

/* Done states—dim but keep header crisp */
.group.done{ opacity:1; } /* don't dim whole card */
.group.done .tasks{ opacity:.7; }
.group.done .task{ text-decoration:line-through; }
.group.done .group-header{
  background:linear-gradient(180deg,#163225,#0f1c1a);
  border-bottom-color:#27493e;
}
